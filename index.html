<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Итоги года 2025</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: linear-gradient(to bottom, #0a1a33, #003366);
  font-family: Arial, sans-serif;
}

#loader, #welcome {
  position: fixed;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  color: white;
  z-index: 10;
}

#welcome {
  flex-direction: column;
  background: rgba(0,0,0,0.7);
  display: none;
  padding: 20px;
}

#welcome button {
  margin-top: 20px;
  padding: 12px 24px;
  font-size: 18px;
  cursor: pointer;
}

#slider {
  position: fixed;
  inset: 0;
  display: none;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

.slide {
  max-width: 100vw;
  max-height: 100vh;
  object-fit: contain;
  position: absolute;
  left: 50%;
  transform: translate(-50%, -50%);
  transition: top 1.5s ease-out;
}

.slide.above {
  top: -50vh;
}

.slide.center {
  top: 50%;
}

.slide.below {
  top: 150vh;
}

#arrow {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 36px;
  color: white;
  cursor: pointer;
  animation: bounce 1s infinite;
  z-index: 100;
}

@keyframes bounce {
  0%,100% { transform: translate(-50%, 0); }
  50% { transform: translate(-50%, 10px); }
}

/* Снегопад */
#snowflakes {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
}

.snowflake {
  position: absolute;
  top: -10px;
  background-color: white;
  border-radius: 50%;
  opacity: 0.8;
}

/* Анимации для снежинок разного размера */
@keyframes fall1 {
  0% { transform: translateY(0) rotate(0deg); opacity: 0.8; }
  100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
}

@keyframes fall2 {
  0% { transform: translateY(0) rotate(0deg); opacity: 0.7; }
  100% { transform: translateY(100vh) rotate(180deg); opacity: 0; }
}

@keyframes fall3 {
  0% { transform: translateY(0) rotate(0deg); opacity: 0.6; }
  100% { transform: translateY(100vh) rotate(90deg); opacity: 0; }
}
</style>
</head>

<body>

<div id="loader">Загрузка…</div>

<div id="welcome">
  <div>
    Добро пожаловать на Итоги Года 2025<br>
    в Чате Тюленчика!
  </div>
  <div style="margin-top:10px;">
    Нажимай на стрелку ↓
  </div>
  <button id="start">Начать</button>
</div>

<div id="slider">
  <!-- Слайды будут создаваться динамически -->
</div>

<div id="arrow">↓</div>

<div id="snowflakes"></div>

<audio id="music" loop>
  <source src="https://markbartolomeev-blip.github.io/Tulenchik_review_year/Christmas%20Village%20-%20Aaron%20Kenny.mp3" type="audio/mpeg">
</audio>

<script>
const images = [
  "https://i.postimg.cc/053tDfVj/phonto.jpg",
  "https://i.postimg.cc/qBYmyL1h/phonto.jpg",
  "https://i.postimg.cc/v8jPfz0t/phonto.jpg",
  "https://i.postimg.cc/7Y2KV2RJ/phonto.jpg",
  "https://i.postimg.cc/VLCKRChC/phonto.jpg",
  "https://i.postimg.cc/NfHd4HnW/phonto.jpg",
  "https://i.postimg.cc/PrwS4w7b/phonto.jpg",
  "https://i.postimg.cc/02wVfw4t/phonto.jpg",
  "https://i.postimg.cc/15qvHqT1/phonto.jpg",
  "https://i.postimg.cc/g2bNB09T/phonto.jpg",
  "https://i.postimg.cc/y8CvrN4H/phonto.jpg",
  "https://i.postimg.cc/4xRBF3kJ/phonto.jpg",
  "https://i.postimg.cc/2SN2X5R3/phonto.jpg",
  "https://i.postimg.cc/2Sd2pfrz/phonto.jpg",
  "https://i.postimg.cc/pLQqNtRL/phonto.jpg",
  "https://i.postimg.cc/2Sd2pfry/phonto.jpg",
  "https://i.postimg.cc/Hk0BGCd4/phonto.jpg",
  "https://i.postimg.cc/zGw0m18F/phonto.jpg"
];

let currentIndex = 0;
let isAnimating = false;
const slider = document.getElementById("slider");
const arrow = document.getElementById("arrow");
const music = document.getElementById("music");

// Функция для создания слайда
function createSlide() {
  const slide = document.createElement('img');
  slide.className = 'slide above';
  return slide;
}

// Функция для создания снежинок
function createSnowflakes() {
  const snowflakesContainer = document.getElementById('snowflakes');
  
  // Создаем 100 снежинок
  for (let i = 0; i < 100; i++) {
    const snowflake = document.createElement('div');
    snowflake.className = 'snowflake';
    
    // Случайный размер от 2 до 6 пикселей
    const size = Math.random() * 4 + 2;
    snowflake.style.width = `${size}px`;
    snowflake.style.height = `${size}px`;
    
    // Случайная начальная позиция
    snowflake.style.left = `${Math.random() * 100}vw`;
    
    // Случайная скорость падения
    const duration = Math.random() * 5 + 5; // от 5 до 10 секунд
    const delay = Math.random() * 5; // задержка до 5 секунд
    
    // Выбираем одну из трех анимаций
    const animationType = Math.floor(Math.random() * 3) + 1;
    
    snowflake.style.animation = `fall${animationType} ${duration}s linear ${delay}s infinite`;
    
    snowflakesContainer.appendChild(snowflake);
  }
}

// Функция для перехода к следующей картинке
function nextImage() {
  if (isAnimating) return;
  if (currentIndex >= images.length) {
    arrow.style.display = "none";
    return;
  }
  
  isAnimating = true;
  
  // Все слайды в контейнере
  const allSlides = Array.from(slider.getElementsByClassName('slide'));
  
  // Находим активный слайд (в центре)
  const activeSlide = allSlides.find(slide => slide.classList.contains('center'));
  
  // Если есть активный слайд, отправляем его вниз
  if (activeSlide) {
    activeSlide.classList.remove('center');
    activeSlide.classList.add('below');
    
    // Удаляем слайд после анимации
    setTimeout(() => {
      if (activeSlide.parentNode) {
        activeSlide.parentNode.removeChild(activeSlide);
      }
    }, 1500);
  }
  
  // Создаем новый слайд для следующей картинки
  const newSlide = createSlide();
  newSlide.src = images[currentIndex];
  slider.appendChild(newSlide);
  
  // Новый слайд опускается из-за верха в центр
  setTimeout(() => {
    newSlide.classList.remove('above');
    newSlide.classList.add('center');
    
    // После завершения анимации разрешаем следующий клик
    setTimeout(() => {
      isAnimating = false;
    }, 1500);
  }, activeSlide ? 100 : 0);
  
  currentIndex++;
}

Promise.all(images.map(src => new Promise(res => {
  const i = new Image();
  i.src = src;
  i.onload = res;
}))).then(() => {
  document.getElementById("loader").style.display = "none";
  document.getElementById("welcome").style.display = "flex";
  // Создаем снежинки после загрузки
  createSnowflakes();
});

document.getElementById("start").onclick = () => {
  music.volume = 0.6;
  music.play();

  document.getElementById("welcome").style.display = "none";
  document.getElementById("slider").style.display = "flex";
  
  // Загружаем первую картинку
  const firstSlide = createSlide();
  firstSlide.src = images[0];
  firstSlide.classList.remove('above');
  firstSlide.classList.add('center');
  slider.appendChild(firstSlide);
  
  currentIndex = 1;
};

arrow.onclick = nextImage;
</script>

</body>
</html>
